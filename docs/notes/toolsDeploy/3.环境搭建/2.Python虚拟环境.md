---
title: Python虚拟环境
createTime: 2025/10/02 16:51:17
permalink: /toolsDeploy/a92j18km/
---


在命令行使用 `pip install xxx` 安装的包，会安装到全局环境中，这样会导致不同项目之间使用同一个包产生版本冲突。为了解决这个问题，可以使用虚拟环境。将python包安装到每个项目的虚拟环境中，这样就不会产生版本冲突。

## pipenv (常用)

### Windows
- **安装**
  ```shell
  # windows安装
  pip install pipenv
  pip3 install pipenv

  # mac安装
  brew install pipenv
  ```
- **激活&&创建虚拟环境**
  ```shell
  # 为当前项目创建一个名为venv的虚拟环境
  # 如果当前项目已经创建过虚拟环境，则进入当前项目的虚拟环境
  pipenv shell
  ```
- **配置pipenv第三方包安装路径(可选)**<br>
  默认情况下pipenv的第三方包安装在`C:/用户/xxx/.virtualenvs/项目名-xxx`路径下，有两种方法可以自定义安装路径:<br>
  **方法一**
    ```shell
    # 在项目根目录下创建一个.venv文件
    mkdir .venv
    # 然后运行 pipenv run 或者 pipenv shell
    pipenv shell
    ```
  **方法二**<br>
    此电脑 -> 属性 -> 高级系统设置 -> 环境变量 -> 系统变量 -> 新建参数WORKON_HOME，值为自定义的路径， 即可在此路径下创建一个.vituralenvs文件夹，用于存放虚拟环境。<br>
- **编辑器设置**<br>
  使用pycharm等编辑器时，需要设置虚拟环境路径，这样编辑器才能识别虚拟环境中的第三方包。操作如下:
  ```txt
  File->Settings -> Project:项目名 -> Python Interpreter
  -> System Interpreter/  'C:/用户/xxx/.virtualenvs/项目名-xxx'  /Scripts/python.exe
  ```


### Ubuntu

- **安装**
  ```bash
  pip install pipenv
  ```

- **激活&&创建虚拟环境**
  ```shell
  # 为当前项目创建一个名为venv的虚拟环境
  # 如果当前项目已经创建过虚拟环境，则进入当前项目的虚拟环境
  pipenv shell
  ```

- **配置pipenv解释器**

默认情况下pipenv的解释器安装在`/home/your_username/.local/share/virtualenvs/your_project_name-4sL6ZqyD/bin/python`路径下

pycharm 添加解释器 -> 选择现有 -> 导航至`/home/your_username/.local/share/virtualenvs/your_project_name-4sL6ZqyD/bin/python3.13`


### 使用说明
- **pipfile 和 pipflie.lock**
  为当前项目创建python虚拟环境后，会在项目根目录下生成pipfile文件
  ```txt
  pipfile:用于记录项目的依赖包，类似于requirements.txt文件。
  pipfile.lock:记录了项目依赖包的具体版本，类似于requirements.txt文件中的依赖包版本。
  ```
- **pipenv常用操作**
  ```shell
  # 退出虚拟环境
  exit

  # 删除当前项目的虚拟环境
  pipenv --rm

  # 定位项目目录
  pipenv --where

  # 定位虚拟环境目录, 即vituralenvs目录
  pipenv --venv

  # 定位python解释器
  pipenv --py
  ```


## virtualenv
- **安装**
  ```shell
  pip install virtualenv
  ```
- **创建虚拟环境**
  ```shell
  # 创建一个名为venv的虚拟环境
  virtualenv venv

  # 创建指定python版本的名为venv的虚拟环境
  virtualenv -p C:\Python36\python.exe venv
  ```
- **激活虚拟环境**
  ```shell
  # windows系统
  venv\Scripts\activate

  # linux系统
  source venv/bin/activate
  ```
- **退出虚拟环境**
  ```shell
  deactivate
  ```
