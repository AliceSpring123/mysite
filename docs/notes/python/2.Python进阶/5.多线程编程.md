---
title: 多线程编程
createTime: 2025/10/02 15:35:13
permalink: /Python/um1r5oi8/
---


## 进程和线程
- 运行在系统上的程序都是进程，并且各自有自己的`进程id`方便系统管理
- 线程是进程的最小单位，一个进程可以开启多个线程，执行不同的工作
- 不同进程之间是内存隔离的，同一个进程下的线程是内存共享的
- GIL（全局解释器锁）：Python 的 GIL 确保同一时间只有一个线程执行 Python 字节码，因此多线程在 CPU 密集型任务中性能提升有限。
![python进程与线程](https://raw.githubusercontent.com/AliceSpring123/img/main/python进程与线程.png)

## 多线程编程
Python多线程依赖`threading`模块实现
```python
import threading
thread_obj = threading.Thread([group[, target, name, args, kwargs]])
"""
创建线程

params:
group: 指定进程组, 无进程组则是None
target: 执行的目标任务名
name: 线程名(可选)
args: 以元组的方式给执行任务传参
kwargs: 以字典方式给执行任务传参
"""

# 启动线程, 让线程开始工作
thread_obj.start()
```

**示例1: 直接创建线程**
```python
import threading
import time

def task(name):
    print(f"任务 {name} 开始")
    time.sleep(2)  # 模拟耗时操作
    print(f"任务 {name} 结束")

# 创建线程
thread1 = threading.Thread(target=task, args=("A",))
thread2 = threading.Thread(target=task, args=("B",))

# 启动线程
thread1.start()
thread2.start()

# 等待线程完成
thread1.join()
thread2.join()

print("所有任务完成")
```

示例2: 继承 `threading.Thread` 类
```python
import threading
import time

class MyThread(threading.Thread):
    def __init__(self, name):
        super().__init__()
        self.name = name

    def run(self):
        print(f"任务 {self.name} 开始")
        time.sleep(2)  # 模拟耗时操作
        print(f"任务 {self.name} 结束")

# 创建线程
thread1 = MyThread("A")
thread2 = MyThread("B")

# 启动线程
thread1.start()
thread2.start()

# 等待线程完成
thread1.join()
thread2.join()

print("所有任务完成")
```
