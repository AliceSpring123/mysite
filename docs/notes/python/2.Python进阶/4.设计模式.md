---
title: 设计模式
createTime: 2025/10/02 15:35:13
permalink: /Python/v69l0js6/
---

## 工厂模式
- 工厂模式的核心思想是将对象的创建逻辑封装在一个单独的工厂类中，客户端代码只需要与工厂类交互，而不需要直接实例化具体的类。
- 当对象的创建过程涉及多个步骤或依赖外部配置时，可以使用工厂模式封装这些逻辑
- 需要修改时仅修改工厂类的创建方法即可
```python

# 定义支付接口（抽象类）
class Payment():
    def pay(self, amount: float) -> None:
        pass

# 具体支付类：支付宝支付
class Alipay(Payment):
    def pay(self, amount: float) -> None:
        print(f"使用支付宝支付 {amount} 元")

# 具体支付类：微信支付
class WechatPay(Payment):
    def pay(self, amount: float) -> None:
        print(f"使用微信支付 {amount} 元")

# 具体支付类：银行卡支付
class BankCardPay(Payment):
    def pay(self, amount: float) -> None:
        print(f"使用银行卡支付 {amount} 元")

# 支付工厂类
class PaymentFactory:
    @staticmethod
    def create_payment(method: str) -> Payment:
        if method == "alipay":
            return Alipay()
        elif method == "wechatpay":
            return WechatPay()
        elif method == "bankcard":
            return BankCardPay()
        else:
            raise ValueError(f"不支持的支付方式: {method}")

# 客户端代码
def main():
    # 通过工厂创建支付对象
    payment_method = "alipay"  # 可以是 "alipay", "wechatpay", "bankcard"
    payment = PaymentFactory.create_payment(payment_method)
    payment.pay(100.0)

if __name__ == "__main__":
    main()


# 客户端只需要与工厂类交互，无需知道具体支付类的实现细节。
# 添加新的支付方式时，只需要新增具体类和修改工厂类，无需修改客户端代码。
# 对象的创建逻辑集中在工厂类中，便于维护。
```

## 单例模式
- 确保一个类只能创建一个实例，节省内存和计算资源
- 提供一个全局访问点，方便其他代码获取该实例
- 单例模式通常用于需要全局唯一对象的场景，例如配置管理、日志记录、数据库连接池等
1. python模块是天然的单例模式，我们只需把函数和数据定义放在一个模块中，就可以获得一个单例对象。

mysingleton.py
```python
class Singleton(obj):
  def foo(self):
    pass

singleton = Singleton()
```
其他文件.py
```python
from mysingleton import singleton

s1 = singleton
s2 = singleton
print(s1)  # 输出: 实例1
print(s2)  # 输出: 实例1
print(s1 is s2)  # 输出: True
```